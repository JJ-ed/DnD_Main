/* Hand header row aligns hand limit and singleton badge */
.hand-header-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Singleton indicator badge */
/* Singleton indicator image */
#singletonIndicator {
    width: 48px;
    height: 48px;
    transform: translateY(-8px);
    object-fit: contain;
    vertical-align: middle;
    margin-left: 8px;
    filter: grayscale(100%) opacity(0.5);
    transition: filter 120ms ease-in-out;
}
#singletonIndicator.active {
    filter: none;
}
.dice-tooltip { /* kept for backward compatibility if present in DOM */
    position: absolute;
    top: 50%;
    left: 105%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    padding: 6px 8px;
    border: 1px solid #4fc3f7;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    pointer-events: none;
    display: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.5);
    z-index: 1002;
}

/* Global tooltip for dice page names */
#diceTooltip {
    position: fixed;
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    padding: 12px 16px;
    border: 2px solid #4fc3f7;
    border-radius: 8px;
    font-size: 13px;
    font-family: 'Courier New', monospace;
    white-space: normal;
    pointer-events: none;
    display: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    z-index: 2000;
    min-width: 200px;
    max-width: 300px;
    word-wrap: break-word;
}

/* Status Effect Tooltip */
#statusEffectTooltip {
    position: fixed;
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 12px 16px;
    border: 2px solid #9c27b0;
    border-radius: 8px;
    font-size: 13px;
    font-family: 'Courier New', monospace;
    white-space: normal;
    pointer-events: none;
    display: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    z-index: 2000;
    min-width: 200px;
    max-width: 300px;
    word-wrap: break-word;
}

/* Passive Tooltip */
.passive-tooltip {
    position: fixed;
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 12px 16px;
    border: 2px solid #f44336;
    border-radius: 8px;
    font-size: 13px;
    font-family: 'Courier New', monospace;
    white-space: normal;
    pointer-events: none;
    display: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    z-index: 2001;
    min-width: 250px;
    max-width: 400px;
    word-wrap: break-word;
}

.passive-tooltip-title {
    font-weight: bold;
    font-size: 16px;
    color: #f44336;
    margin-bottom: 8px;
    text-align: center;
}

.passive-tooltip-description {
    font-size: 13px;
    color: #fff;
    line-height: 1.5;
}

.status-effect-tooltip-title {
    font-weight: bold;
    font-size: 16px;
    color: #9c27b0;
    margin-bottom: 8px;
    text-align: center;
}

.status-effect-tooltip-description {
    font-size: 13px;
    color: #fff;
    line-height: 1.5;
    margin-bottom: 6px;
}

.status-effect-tooltip-value {
    font-size: 12px;
    color: #90ee90;
    margin-top: 6px;
    font-style: italic;
}

.dice-tooltip-content {
    font-family: 'Courier New', monospace;
}

/* Only the range text uses a Gothic stack */
.dice-tooltip-dice .dice-range {
    font-family: 'Century Gothic', 'Apple SD Gothic Neo', 'Malgun Gothic', 'Nanum Gothic', 'Segoe UI', sans-serif;
}

.dice-tooltip-title {
    font-weight: bold;
    font-size: 16px;
    color: #4fc3f7;
    margin-bottom: 6px;
    text-align: center;
}

.dice-tooltip-category {
    font-size: 11px;
    color: #90ee90;
    margin-bottom: 8px;
    text-align: center;
    font-style: italic;
}

.dice-tooltip-dice {
    font-size: 14px;
    color: #fff;
    margin-bottom: 6px;
    padding: 2px 0;
    line-height: 1.5;
}

.dice-tooltip-dice:last-child {
    margin-bottom: 0;
}

.dice-tooltip-dice br {
    line-height: 1.6;
}

.dice-special {
    font-size: 12px;
    margin-left: -5px;
    font-style: italic;
}

/* Reuse existing popup styles; add minor tweaks for occupied-dice modal if needed */
#occupiedDicePopup .confirm-unequip-btn {
    padding: 12px 24px;
    background-color: #f44336;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

#occupiedDicePopup .confirm-unequip-btn:hover {
    background-color: #d32f2f;
}

#occupiedDicePopup .cancel-unequip-btn {
    padding: 12px 24px;
    background-color: #666;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
}

/* Combat Results Popup Styles */
.combat-results-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 3000;
    font-family: 'Courier New', monospace;
}

.combat-results-popup.show {
    display: flex;
}

.combat-results-content {
    background-color: #2c2c2c;
    border: 2px solid #4fc3f7;
    border-radius: 12px;
    max-width: 800px;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 0 30px rgba(79, 195, 247, 0.3);
}

.popup-header {
    background-color: #3a3a3a;
    padding: 20px;
    border-bottom: 2px solid #4fc3f7;
    border-radius: 10px 10px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 60px;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0;
}

.popup-header h3 {
    color: #4fc3f7;
    margin: 0;
    font-size: 24px;
    flex: 1;
    min-width: 0;
}

.close-popup {
    color: #fff;
    font-size: 28px;
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.3s ease;
}

.close-popup:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.copy-results-btn {
    background-color: #4fc3f7;
    color: #000;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 13px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
    height: 32px;
}

.copy-results-btn:hover {
    background-color: #29b6f6;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(79, 195, 247, 0.3);
}

.copy-results-btn:active {
    transform: translateY(0);
}

.copy-icon {
    font-size: 16px;
}

.combat-results-body {
    padding: 20px;
}

.results-summary {
    background-color: #3a3a3a;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

.results-summary h4 {
    color: #4fc3f7;
    margin-bottom: 10px;
    font-size: 18px;
}

.results-summary p {
    margin: 5px 0;
    color: #fff;
    font-size: 14px;
}

.results-details h4 {
    color: #4fc3f7;
    margin-bottom: 15px;
    font-size: 18px;
}

.page-result {
    background-color: #3a3a3a;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    transition: border-color 0.3s ease;
}

.page-result:hover {
    border-color: #4fc3f7;
}

.page-result-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid #555;
}

.page-name {
    color: #fff;
    font-weight: bold;
    font-size: 16px;
}

.page-dice-count {
    color: #4fc3f7;
    font-size: 14px;
    font-weight: bold;
}

.page-result-details {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.no-dice {
    color: #888;
    font-style: italic;
    font-size: 14px;
}

.dice-rolls {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
}

.dice-label {
    color: #fff;
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 2px;
}

.dice-roll {
    background-color: transparent;
    color: #ff4c4c;
    padding: 0;
    border-radius: 0;
    font-weight: bold;
    min-width: 0;
    text-align: left;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    cursor: help;
}

/* Make combat result dice icons line up nicely next to the roll number */
.dice-roll .effect-icon {
    width: 38px;
    height: 42px;
    margin-right: 0;
}

.dice-roll-value {
    display: inline-block;
    min-width: 14px;
    font-family: 'Mikodacs', 'Courier New', monospace;
    font-size: 20px;
}

.dice-ranges {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 5px;
}

.range-label {
    color: #fff;
    font-weight: bold;
    font-size: 14px;
}

.dice-range {
    background: none;
    color: #fff;
    padding: 0;
    border-radius: 3px;
    font-size: 20px;
    font-weight: semibold;
    min-width: 18px;
    text-align: center;
    display: inline-block;
    border: none;
    transform: translateX(-14px);
}

.total-damage {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 5px;
}

.damage-label {
    color: #fff;
    font-weight: bold;
    font-size: 14px;
}

.damage-value {
    background-color: #ff6b6b;
    color: #fff;
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 16px;
    min-width: 30px;
    text-align: center;
    display: inline-block;
}

.popup-actions {
    padding: 20px;
    border-top: 1px solid #555;
    text-align: right;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.close-results-btn {
    background-color: #4fc3f7;
    color: #000;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 16px;
    transition: background-color 0.3s ease;
}

.close-results-btn:hover {
    background-color: #29b6f6;
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Courier New', monospace;
    background-color: #2c2c2c;
    color: #ffffff;
    padding: 20px;
}

.game-container {
    display: flex;
    gap: 30px;
    max-width: 1400px;
    margin: 0 auto;
    height: 100vh;
}

/* Left Panel Styles */
.left-panel {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 45%;
}

.character-section, .combat-pages-section, .passives-section, .inventory-section, .debug-section {
    background-color: #3a3a3a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 20px;
}

.character-section h3 {
    margin-bottom: 15px;
    color: #4fc3f7;
}

.debug-section h3 {
    margin-bottom: 15px;
    color: #ff9800;
}

/* Debug section specific styling */
.debug-input-group {
    margin-bottom: 20px;
}

.debug-input-group label {
    display: block;
    margin-bottom: 8px;
    color: #fff;
    font-weight: normal;
    font-size: 14px;
}

.debug-select {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #2a2a2a;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
    transition: border-color 0.3s ease;
}

.debug-select:focus {
    outline: none;
    border-color: #ff9800;
    box-shadow: 0 0 5px rgba(255, 152, 0, 0.3);
}

.debug-select option {
    background-color: #2a2a2a;
    color: #fff;
    padding: 8px;
}

.debug-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.debug-btn {
    width: 100%;
    padding: 10px 16px;
    background-color: #4caf50;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.debug-btn:hover {
    background-color: #45a049;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
}

.debug-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
}

.input-group {
    margin-bottom: 15px;
}

.input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.input-group input {
    width: 100%;
    padding: 8px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #2a2a2a;
    color: #fff;
}

.stats-group {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.stat-input-group {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.stat-input-group label {
    font-size: 12px;
    margin-bottom: 5px;
    color: #ccc;
    font-weight: bold;
}

.add-passive-btn {
    display: inline-block;
    cursor: pointer;
    color: #4fc3f7;
    font-size: 16px;
    font-weight: bold;
    margin-left: 5px;
    padding: 2px 6px;
    border-radius: 3px;
    transition: all 0.2s ease;
    user-select: none;
}

.add-passive-btn:hover {
    background-color: #4fc3f7;
    color: #2a2a2a;
    transform: scale(1.1);
}

.stat-input {
    padding: 8px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #2a2a2a;
    color: #fff;
    font-size: 12px;
}

.stat-input:focus {
    outline: none;
    border-color: #4fc3f7;
    box-shadow: 0 0 5px rgba(79, 195, 247, 0.3);
}

/* Select dropdown styling */
.stat-input option {
    background-color: #2a2a2a;
    color: #fff;
    padding: 8px;
}

.stat-input option:hover {
    background-color: #4fc3f7;
    color: #000;
}

/* Textarea styling for passives */
textarea.stat-input {
    resize: vertical;
    font-family: inherit;
    min-height: 60px;
}

/* Discard All Modal Enhanced Styles */
.discard-all-modal .modal-content {
    background: linear-gradient(135deg, #2c2c2c 0%, #3a3a3a 100%);
    border: 2px solid #4fc3f7;
    border-radius: 12px;
    box-shadow: 0 0 30px rgba(79, 195, 247, 0.3);
    position: relative;
    overflow: hidden;
}

.discard-all-modal .modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #4fc3f7, #ff9800, #f44336, #4caf50);
    border-radius: 12px 12px 0 0;
}

.discard-all-modal .modal-content h3 {
    color: #4fc3f7;
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 15px;
    text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    position: relative;
}

.discard-all-modal .modal-content h3::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #4fc3f7, transparent);
}

.discard-all-modal .modal-content p {
    color: #e0e0e0;
    text-align: center;
    margin-bottom: 25px;
    font-size: 16px;
    line-height: 1.5;
}

.discard-all-modal .input-group {
    margin-bottom: 30px;
}

.discard-all-modal .input-group label {
    color: #4fc3f7;
    font-weight: bold;
    font-size: 16px;
    margin-bottom: 10px;
    display: block;
}

.discard-all-modal .stat-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #555;
    border-radius: 8px;
    background: linear-gradient(135deg, #2a2a2a 0%, #333 100%);
    color: #fff;
    font-size: 16px;
    transition: all 0.3s ease;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.discard-all-modal .stat-input:focus {
    outline: none;
    border-color: #4fc3f7;
    box-shadow: 0 0 15px rgba(79, 195, 247, 0.4), inset 0 2px 4px rgba(0, 0, 0, 0.3);
    transform: translateY(-1px);
}

.discard-all-modal .stat-input option {
    background-color: #2a2a2a;
    color: #fff;
    padding: 12px;
    font-size: 16px;
}

.discard-all-modal .stat-input option:hover {
    background-color: #4fc3f7;
    color: #000;
}

.discard-all-modal .modal-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 25px;
}

.discard-all-modal .modal-btn {
    padding: 14px 28px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    min-width: 160px;
}

.discard-all-modal .modal-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.discard-all-modal .modal-btn:hover::before {
    left: 100%;
}

.discard-all-modal .confirm-btn {
    background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
}

.discard-all-modal .confirm-btn:hover {
    background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
}

.discard-all-modal .cancel-btn {
    background: linear-gradient(135deg, #666 0%, #555 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.discard-all-modal .cancel-btn:hover {
    background: linear-gradient(135deg, #777 0%, #666 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

/* Modal Animation */
.discard-all-modal {
    animation: modalFadeIn 0.3s ease-out;
}

.discard-all-modal .modal-content {
    animation: modalSlideIn 0.4s ease-out;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.action-buttons {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
}

.action-btn {
    padding: 8px 16px;
    background-color: #4caf50; /* Green background */
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    flex: 1;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
    min-height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.action-btn:hover {
    background-color: #45a049;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
}

.action-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
}

.update-btn {
    width: 100%;
    padding: 12px 20px;
    background-color: #4285f4; /* Blue background matching the encounter buttons */
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(66, 133, 244, 0.3);
    min-height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.update-btn:hover {
    background-color: #3367d6;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4);
}

.update-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(66, 133, 244, 0.3);
}

/* Combat Pages Section */
.combat-pages-section h3.red-text {
    color: #f44336;
    margin-bottom: 15px;
}

/* Passives Section */
.passives-section h3.red-text {
    color: #f44336;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.passives-section .add-passive-btn {
    font-size: 20px;
    padding: 2px 8px;
}

.search-group {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.search-input {
    flex: 1;
    padding: 8px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #2a2a2a;
    color: #fff;
}

.search-btn {
    padding: 8px 15px;
    background-color: #ff9800;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
}

.search-btn:hover {
    background-color: #f57c00;
}

.list-display {
    background-color: #2a2a2a;
    border: 1px solid #555;
    border-radius: 4px;
    height: 200px;
    overflow-y: auto;
    margin-bottom: 15px;
    padding: 10px;
}

.list-item {
    padding: 8px;
    border-bottom: 1px solid #444;
    cursor: pointer;
}

.list-item:hover {
    background-color: #444;
}

.passive-item {
    position: relative;
}

.passive-item:hover::after {
    content: ' (click to remove)';
    color: #888;
    font-size: 11px;
    font-style: italic;
}

/* Passive option in modal */
.passive-option {
    transition: background-color 0.2s ease;
}

.passive-option.selected {
    background-color: #444 !important;
    border-color: #4fc3f7;
}

.passive-option.owned {
    opacity: 0.6;
    color: #888;
    cursor: not-allowed;
    pointer-events: auto;
}

/* Right-side icon for ranged pages in the list */
.range-icon {
    width: 16px;
    height: 16px;
    margin-left: 8px;
    flex-shrink: 0;
    filter: brightness(1.1) contrast(1.1);
}

.confirm-btn {
    width: 100%;
    padding: 10px;
    background-color: #4caf50;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
}

.confirm-btn:hover {
    background-color: #45a049;
}

/* Inventory Section */
.inventory-section h3 {
    margin-bottom: 15px;
    color: #9c27b0;
}

.inventory-display {
    background-color: #2a2a2a;
    border: 1px solid #555;
    border-radius: 4px;
    height: 150px;
    overflow-y: auto;
    margin-bottom: 15px;
    padding: 10px;
}

.inventory-item {
    padding: 8px;
    border-bottom: 1px solid #444;
    cursor: pointer;
}

.inventory-item:hover {
    background-color: #444;
}

/* Owned Pages Menu Button */
.owned-pages-menu-btn {
    cursor: pointer;
    user-select: none;
    transition: color 0.3s ease;
}

.owned-pages-menu-btn:hover {
    color: #bb86fc;
}

/* Owned Pages Popup */
.owned-pages-popup {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

.owned-pages-popup.show {
    display: block;
}

.owned-pages-popup-content {
    background-color: #2a2a2a;
    margin: 3% auto;
    padding: 0;
    border: 2px solid #4a9eff;
    border-radius: 8px;
    width: 90%;
    max-width: 900px;
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.9);
    font-family: 'Courier New', monospace;
}

.popup-header {
    background-color: #1a1a1a;
    padding: 15px 20px;
    border-bottom: 2px solid #4a9eff;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.popup-title {
    color: #4a9eff;
    font-size: 1.4em;
    font-weight: bold;
    margin: 0;
    font-family: 'Courier New', monospace;
    text-shadow: 0 0 5px rgba(74, 158, 255, 0.3);
}

.close-popup {
    color: #fff;
    font-size: 1.5em;
    cursor: pointer;
    padding: 5px;
    border-radius: 3px;
    transition: background-color 0.2s;
}

.close-popup:hover {
    background-color: #444;
}

.popup-body {
    padding: 20px;
    max-height: 70vh;
    overflow-y: auto;
}

.popup-section {
    margin-bottom: 20px;
}

.section-title {
    color: #4a9eff;
    font-size: 1.1em;
    font-weight: bold;
    margin: 0 0 8px 0;
    font-family: 'Courier New', monospace;
}

.section-instruction {
    color: #ccc;
    font-size: 0.9em;
    margin: 0 0 15px 0;
    font-family: 'Courier New', monospace;
}

.search-input {
    width: 100%;
    padding: 10px;
    background-color: #1a1a1a;
    border: 1px solid #555;
    border-radius: 4px;
    color: #fff;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
}

.search-input:focus {
    outline: none;
    border-color: #4a9eff;
    box-shadow: 0 0 5px rgba(74, 158, 255, 0.3);
}

.owned-pages-display {
    background-color: #1a1a1a;
    border: 1px solid #555;
    border-radius: 4px;
    max-height: 50vh;
    overflow-y: auto;
    padding: 10px;
}

.empty-inventory {
    text-align: center;
    color: #888;
    padding: 30px;
    font-style: italic;
    font-family: 'Courier New', monospace;
}

.page-item {
    background-color: #2a2a2a;
    border: 1px solid #444;
    border-radius: 4px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.page-item:hover {
    background-color: #333;
    border-color: #4a9eff;
    box-shadow: 0 0 8px rgba(74, 158, 255, 0.2);
}

.page-item.selected {
    background-color: #1a3a5c;
    border-color: #4a9eff;
    box-shadow: 0 0 10px rgba(74, 158, 255, 0.4);
}

.page-name {
    font-weight: bold;
    color: #fff;
    font-size: 1.1em;
    margin-bottom: 4px;
    font-family: 'Courier New', monospace;
}

.page-category {
    color: #ff8c00;
    font-size: 0.9em;
    margin-bottom: 4px;
    font-family: 'Courier New', monospace;
}

.page-range {
    color: #4a9eff;
    font-size: 0.85em;
    margin-bottom: 4px;
    font-family: 'Courier New', monospace;
}

.page-keywords {
    color: #90ee90;
    font-size: 0.85em;
    margin-bottom: 4px;
    font-family: 'Courier New', monospace;
}

.page-cost {
    position: absolute;
    top: 12px;
    right: 12px;
    background-color: #4a9eff;
    color: #fff;
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 0.8em;
    font-family: 'Courier New', monospace;
    font-weight: bold;
}

.page-light-cost {
    position: absolute;
    top: 40px;
    right: 12px;
    background-color: #4a9eff;
    color: #fff;
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 0.8em;
    font-family: 'Courier New', monospace;
    font-weight: bold;
}

/* Popup Layout */
.popup-main-content {
    display: flex;
    gap: 20px;
    height: 100%;
}

.popup-left-panel {
    flex: 1;
    min-width: 300px;
}

.popup-right-panel {
    flex: 1;
    min-width: 300px;
}

/* Cards Grid */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 12px;
    max-height: 55vh;
    overflow-y: auto;
    padding: 12px;
    background-color: #1a1a1a;
    border: 1px solid #555;
    border-radius: 4px;
    min-height: 480px;
}

.page-card {
	background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
	border: 2px solid #4a9eff;
    border-radius: 8px;
    padding: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    width: 135px;
    min-height: 170px;
    display: flex;
    flex-direction: column;
}

/* Card skin: CardDesign frame images */
.page-card.carddesign {
	background-image: url('Other Stuff/CardDesign/DiceCard_White_Merge_CardDesign.png');
	background-size: 100% 100%;
	background-repeat: no-repeat;
	background-color: transparent;
	border: none; /* remove blue outline for skinned cards */
	position: relative; /* needed for pseudo-elements */
}
.page-card.carddesign:hover {
	border: none; /* keep outline removed on hover */
	box-shadow: none; /* remove blue hover shadow */
	transform: none; /* remove hover transform */
}
/* Card shadow for carddesign cards */
.page-card.carddesign::after {
	content: '';
	position: absolute;
	bottom: -10px;
	left: 50%;
	transform: translateX(-50%);
	width: 100%;
	height: 20px;
	background-image: url('Other Stuff/CardDesign/CardShadow_Page.png');
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center bottom;
	pointer-events: none;
	z-index: -1;
	opacity: 0.6;
	transition: opacity 0.2s ease;
}
.page-card.carddesign:hover::after {
	opacity: 0.8;
}

/* IDK overlay - separate layer */
.page-card.carddesign::before {
	content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url('Other Stuff/CardDesign/DiceCard_White_IDK.png');
    background-size: 100% 55%;
    transform: translate(5px, -42px);
    background-repeat: no-repeat;
    background-position: center;
    pointer-events: none;
    z-index: 1;
}

/* Smudge overlays - top smudge via card-illustration element */
.page-card.carddesign .card-illustration {
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 35%;
	background-image: url('Other Stuff/CardDesign/DiceCard_White_Merge_WhiteSmudTop.png');
	background-repeat: no-repeat;
	background-size: 100% 100%;
	transform: translate(-5px, -3px);
	pointer-events: none;
	opacity: 0.55;
	z-index: 2;
}
.page-card.carddesign .card-illustration::before {
	display: none; /* override default card-illustration::before */
}

/* Ensure card UI renders above smudges */
.page-card.carddesign .card-title,
.page-card.carddesign .card-type,
.page-card.carddesign .card-effects,
.page-card.carddesign .card-light-usage {
	position: relative;
	z-index: 4;
}

/* Place the title text over the white stripe area for skinned cards */
.page-card.carddesign .card-title {
	position: absolute;
    top: 15.6px;
    left: 40%;
    right: auto;
    margin: 0;
    padding: 0;
    background: transparent !important;
    box-shadow: none !important;
    color: #0b0b0b;
    text-align: center;
    font-weight: 800;
    font-family: 'ExcelsiorSans', sans-serif;
    letter-spacing: 0.5px;
    border-radius: 0;
    width: calc(100% - 24px);
    transform: translate(-50%, -50%) rotate(-10.8deg);
    transform-origin: center;
    text-shadow: 0.5px 0.5px 0 rgba(255, 255, 255, 0.6), -0.5px -0.5px 0 rgba(0, 0, 0, 0.15);
}
/* Preview cards title styling - override carddesign title for preview cards only */
.cards-grid .page-card.carddesign .card-title {
	position: absolute;
    top: 40.6px;
    left: 40%;
    right: auto;
    margin: 0;
    padding: 0;
    background: transparent !important;
    box-shadow: none !important;
    color: #0b0b0b;
    text-align: center;
    font-weight: 800;
    font-family: 'ExcelsiorSans', sans-serif;
    letter-spacing: 0.5px;
    border-radius: 0;
    width: calc(100% - 24px);
    transform: translate(-50%, -50%) rotate(-12deg);
    transform-origin: center;
    text-shadow: 0.5px 0.5px 0 rgba(255, 255, 255, 0.6), -0.5px -0.5px 0 rgba(0, 0, 0, 0.15);
}

.page-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(74, 158, 255, 0.3);
    border-color: #6bb6ff;
}

.page-card.selected {
    border-color: #ff8c00;
    box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
}

.card-cost {
    position: absolute;
    top: 4px;
    left: 4px;
    background-color: #4a9eff;
    color: #fff;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.7em;
    font-weight: bold;
    font-family: 'Courier New', monospace;
}

.card-type {
    position: absolute;
    top: 4px;
    right: 4px;
	background: transparent; /* now replaced by range icon */
	color: transparent;
	padding: 0;
	border-radius: 0;
	font-size: 0;
	font-weight: normal;
	font-family: inherit;
}

.card-light-usage {
    position: absolute;
    top: -11px;
    left: -8px;
    width: auto;
    height: auto;
    max-width: 32px;
    max-height: 32px;
    object-fit: contain;
    pointer-events: none;
    z-index: 5;
    transform: rotate(-5deg) scale(0.75);
}

/* Range icon top-right */
.page-card .range-icon {
	position: absolute;
    top: 4px;
    right: 4px;
    width: 31.5px;
    height: 35px;
    transform: translate(0px, -4.5px);
    object-fit: contain;
    pointer-events: none;
    z-index: 5;
}

.card-title {
    background-color: #4a9eff;
    color: #fff;
    padding: 6px 8px;
    margin: 24px 0 10px 0;
    border-radius: 3px;
    font-size: 0.9em;
    font-weight: bold;
    text-align: center;
    font-family: 'Courier New', monospace;
    line-height: 1.2;
}

.card-illustration {
    display: none;
}

.card-illustration::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at center, rgba(74, 158, 255, 0.1) 0%, transparent 70%);
}

.card-effects {
    display: flex;
    gap: 4px;
    justify-content: center;
    margin-top: 4px;
    transform: translate(-3px, 12px) rotate(-9deg);
}

.effect-icon {
    width: 24px;
    height: 24px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    display: inline-block;
    vertical-align: middle;
    border: none;
    border-radius: 3px;
}

/* Slightly shift icons in dice tooltip lines for better visual alignment */
.dice-tooltip-dice .effect-icon {
    width: 42px;
    height: 42px;
    margin-right: 8px;
    transform: translateY(-5px);
}

/* Default Icons */
.effect-icon.blunt {
    background-image: url('ICONS/BLUNT1.png');
}

.effect-icon.evade {
    background-image: url('ICONS/EVADE1.png');
}

.effect-icon.pierce {
    background-image: url('ICONS/PIERCE1.png');
}

.effect-icon.shield {
    background-image: url('ICONS/SHIELD1.png');
}

.effect-icon.slash {
    background-image: url('ICONS/SLASH1.png');
}

.effect-icon.counter {
    background-image: url('ICONS/COUNTERDICE.png') !important;
}

/* Clash Dice Icons */
.effect-icon.clash-slash {
    background-image: url('ICONS/CLASH_SLASH.png');
}

.effect-icon.clash-blunt {
    background-image: url('ICONS/CLASH_BLUNT.png');
}

.effect-icon.clash-pierce {
    background-image: url('ICONS/CLASH_PIERCE.png');
}

.effect-icon.clash-evade {
    background-image: url('ICONS/CLASH_EVADE.png');
}

.effect-icon.clash-shield {
    background-image: url('ICONS/CLASH_SHIELD.png');
}

/* Fallback for generic effect icons */
.effect-icon.generic {
    display: none;
}

.effect-icon.blue {
    background-color: #4a9eff;
    border-radius: 50%;
}

.effect-icon.green {
    background-color: #90ee90;
    border-radius: 50%;
}

.effect-icon.red {
    background-color: #ff6b6b;
    border-radius: 50%;
}

/* Empty Card Slot */
.empty-card-slot {
    background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
    border: 2px dashed #555;
    border-radius: 8px;
    padding: 8px;
    min-height: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 0.8em;
    font-family: 'Courier New', monospace;
    text-align: center;
    transition: all 0.3s ease;
}

.empty-card-slot:hover {
    border-color: #777;
    color: #888;
}

.remove-btn {
    width: 100%;
    padding: 10px;
    background-color: #f44336;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
}

.remove-btn:hover {
    background-color: #d32f2f;
}

/* Right Panel Styles */
.right-panel {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 55%;
}

.stats-section, .combat-state-section, .hand-section, .page-details-section {
    background-color: #3a3a3a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 20px;
}

.stats-section h3 {
    margin-bottom: 15px;
    color: #4fc3f7;
}

.stat-row {
    padding: 8px 0;
    border-bottom: 1px solid #444;
    display: flex;
    align-items: center;
}

.stat-row:last-child {
    border-bottom: none;
}

.small-input {
    width: 60px;
    padding: 4px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #2a2a2a;
    color: #fff;
    margin-left: 10px;
}

/* Temperance-based stats styling */
#maxHandValue, #drawPerSceneValue {
    color: #4fc3f7;
    font-weight: bold;
    font-size: 1.1em;
}

#singletonStatus {
    color: #4ecdc4;
    font-weight: bold;
    font-size: 1.1em;
}

.singleton-stat.inactive {
    background: linear-gradient(135deg, rgba(102, 102, 102, 0.05), rgba(102, 102, 102, 0.02));
    border-left-color: #666;
}

.singleton-stat.active {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(78, 205, 196, 0.05));
    border-left-color: #4ecdc4;
}

.temperance-stat {
    background-color: rgba(79, 195, 247, 0.1);
    border-radius: 4px;
    padding: 10px 8px;
    margin: 2px 0;
}

.singleton-stat {
    background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(78, 205, 196, 0.05));
    border-left: 3px solid #4ecdc4;
    border-radius: 4px;
    padding: 10px 8px;
    margin: 2px 0;
}

/* Combat State Section */
.combat-state-section h3 {
    margin-bottom: 15px;
    color: #ff9800;
}

.resource-bar {
    width: 100%;
    height: 24px; /* taller to fit emotion coin icons */
    background-color: transparent;
    border-radius: 6px;
    overflow: hidden;
    position: relative;
}

.resource-bar::before { background-image: none; }

.resource-fill {
    display: none; /* replaced by segment-based UI */
}

/* Segmented emotion bar */
.emotion-segments {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: flex-start; /* let segments start at left and stretch */
    gap: 4px;
    padding: 0 8px; /* small breathing room at edges */
    z-index: 1; /* appear above any background */
}

.emotion-segment {
    /* Each segment is a long rhombus / skewed bar */
    position: relative;
    flex: 1 1 0;   /* stretch segments to fill bar width */
    width: auto;
    height: 20px;
    background-color: #555; /* empty segment color */
    border-radius: 3px;
    transform: skewX(-35deg);
    opacity: 0.6; /* dim when empty */
}

.emotion-segment.filled {
    opacity: 1; /* fully visible when filled */
}

.emotion-segment.filled[data-kind="positive"] {
    box-shadow: 0 0 4px #10b981;
}

.emotion-segment.filled[data-kind="negative"] {
    box-shadow: 0 0 4px #ef4444;
}

.modifier-buttons {
    display: flex;
    position: relative;
    align-items: center;
    justify-content: center;
}

.mod-btn {
    width: 40px;
    height: 40px;
    background-image: url('Other Stuff/EmotionLevel/Emotion_bufBaseFrame.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    background-color: transparent;
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 20px;
    cursor: pointer;
    position: relative;
    z-index: 1;
}

.mod-btn.small {
    width: 32px;
    height: 32px;
    font-size: 18px;
}

.mod-btn:hover {
    background-color: #777;
}

.encounter-btn, .scene-btn, .result-btn {
    padding: 12px 20px;
    background-color: #4285f4; /* Material blue similar to the image */
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(66, 133, 244, 0.3);
    width: 180px; /* Fixed width for both buttons */
    height: 50px; /* Fixed height for both buttons */
    display: flex;
    align-items: center;
    justify-content: center;
}

.encounter-btn:hover, .scene-btn:hover, .result-btn:hover {
    background-color: #3367d6;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4);
}

.encounter-btn:active, .scene-btn:active, .result-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(66, 133, 244, 0.3);
}

.result-btn {
    background-color: #ff9800;
}

.result-btn:hover {
    background-color: #f57c00;
}

/* Light indicator above speed dice */
.light-indicator-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-top: 10px;
    margin-bottom: 5px;
    background: transparent;
    border: none;
    gap: 8px;
}

.light-indicator-orbs {
    display: flex;
    gap: 0px;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
}

.light-indicator-orb {
    width: 32px;
    height: 36px;
    background-image: url('Other Stuff/Light/LightCostLogo.png');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    border: none;
    transform: scale(1.5);
    transition: filter 0.3s ease;
}

.light-indicator-orb.used {
    background-image: url('Other Stuff/Light/LightSpendingLogo.png');
}

.light-indicator-orb.spent {
    background-image: url('Other Stuff/Light/LightSpendLogo.png');
}

.dice-cost-bottom-ui {
    width: auto;
    height: auto;
    max-width: 100%;
    object-fit: contain;
    transform: translate(11px, -25px);
}

.hexagonal-slots {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 15px;
    margin-bottom: 12px;
}

/* New layout for combat state */
.combat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
    padding: 15px;
    background-color: #2a2a2a;
    border-radius: 8px;
    border: 1px solid #555;
}

.combat-stats {
    display: flex;
    gap: 20px;
    font-weight: bold;
}

.emotion-header {
    display: flex;
    align-items: center;
    gap: 12px;
}

.emotion-level-icons {
    position: relative;
    width: 120px; /* fixed width so all level banners occupy the same spot */
    height: 28px;
    display: block;
}

.emotion-level-icon {
    position: absolute;
    top: 0;
    left: 0;
    height: 28px;
    width: auto;
    display: block;
    opacity: 0; 
    transition: opacity 0.15s ease-out;
    transform: translate(10px, -5px) scale(3.5) rotate(-18deg);
}



.combat-actions {
    display: flex;
    gap: 15px;
    align-items: center;
    justify-content: center;
}

.resource-row {
    display: flex;        
    align-items: center;
    justify-content: center; /* center the row content */
    gap: 12px;
    margin-top: 25px;
    margin-bottom: 20px;
    margin-left: auto;
    margin-right: auto;
    position: relative;     /* allow absolute positioning of banner */
    max-width: fit-content; /* only take up needed space */
    transform: translateX(120px);
}

.resource-row-banner {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
    transform: translate(41px, -5px) scale(1.8);
    overflow: hidden; 
}

/* Let the emotion bar and icon layout nicely within the row */
.resource-row .emotion-level-icons {
    flex: 0 0 40px; /* fixed banner width on the left */
    margin-right: 8px;
    position: relative;
    z-index: 1; /* appear above banner */
}

.resource-row .resource-bar {
    flex: 2 1 auto; /* bar takes more space - wider */
    min-width: 160px; /* ensure minimum width */
    position: relative;
    z-index: 2; /* appear above banner */
    background-color: rgba(0, 0, 0, 0.1); /* slight background so bar is visible */
}

.resource-row .modifier-buttons {
    position: relative;
    z-index: 1; /* appear above banner */
}

.emotion-counts {
    margin-top: 6px;
    font-size: 12px;
    color: #c9c9c9;
    text-align: left;
}

.emotion-counts-inline {
    margin-left: 8px;
    font-size: 12px;
    color: #c9c9c9;
}

.hex-slot {
    width: 60px;
    height: 70px;
    background-color: #000;
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 10px;
    color: #ccc;
    border: 1px solid #cbb78b;
    position: relative;
    box-shadow: 0 0 15px #bfa468, 0 0 25px #bfa468, 0 0 35px #bfa468;
}

.hex-slot.filled {
    background-color: #000;
    color: #fff;
}

/* Locked dice overlay icon */
.locked-dice-overlay {
    position: absolute;
    top: 45%;
    left: 49%;
    width: 52px;
    height: 62px;
    z-index: 9999; 
    pointer-events: none; /* overlay should not capture clicks */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.6));
    transform: translate(-50%, -50%);
}

/* Speed range image inside hex slots */
.speed-range-img {
    width: 153%;
    height: 153%;
    object-fit: cover;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.4));
    transform: translate(-17.5%, -17.5%);
    /* Optimize PNG rendering */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* Individual DiceRoll image sizes (speed dice only) */
.speed-range-img[src*="DiceRoll1.png"] {
    width: 120%;
    height: 123%;
    transform: translate(-9%, -9%);
}

.speed-range-img[src*="DiceRoll2.png"] {
    width: 107%;
    height: 107%;
    transform: translate(-4%, -4%);
}

.speed-range-img[src*="DiceRoll3.png"] {
    width: 115%;
    height: 115%;
    transform: translate(-5%, -9%);
}

.speed-range-img[src*="DiceRoll4.png"] {
    width: 107%;
    height: 107%;
    transform: translate(-3%, -5%);
}

.speed-range-img[src*="DiceRoll5.png"] {
    width: 108%;
    height: 108%;
    transform: translate(-4%, -3%);
}

.speed-range-img[src*="DiceRoll6.png"] {
    width: 110%;
    height: 105%;
    transform: translate(-6%, -3%);
}

.speed-range-img[src*="DiceRoll7.png"] {
    width: 115%;
    height: 113%;
    transform: translate(-5%, -4%);
}

.speed-range-img[src*="DiceRoll8.png"] {
    width: 106%;
    height: 106%;
    transform: translate(-3%, -2%);
}

.speed-range-img[src*="DiceRoll9.png"] {
    width: 110%;
    height: 110%;
    transform: translate(-4%, -4%);
}



/* Hand Section */
.hand-section {
    display: grid;
    grid-template-columns: 1fr 140px;
    gap: 16px;
    align-items: start;
}

.hand-left {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
}

.vitals-summary {
    display: flex;
    gap: 16px;
    margin-bottom: 8px;
    align-items: flex-start;
    flex-wrap: wrap;
}

/* Scene counter shown above hand limit */
.scene-counter {
    margin-bottom: 6px;
    color: #e0e0e0;
    font-weight: 600;
}

/* Vital Container - Each HP/SP bar */
.vital-container {
    position: relative;
    flex: 1;
    min-width: 200px;
}

/* Vital Header - Contains icon, label, and values */
.vital-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
    position: relative;
    z-index: 1;
}

.vital-left {
    display: flex;
    align-items: center;
    gap: 6px;
}

.vital-right {
    display: flex;
    align-items: center;
}

.vital-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.vital-label {
    color: #9E6E4A;
    font-weight: bolder;
    font-size: 21px;
    text-transform: uppercase;
    font-family: 'ExcelsiorSans', sans-serif;
    text-shadow: 0.5px 0.5px 0 rgba(0, 0, 0, 0.3);
    letter-spacing: -1px;
    transform: translate(-2px, -1px);
}

.vital-values {
    color: #8c674a;
    font-weight: bolder;
    font-size: 23px;
    text-transform: uppercase;
    font-family: 'ExcelsiorSans', sans-serif;
    text-shadow: 0.5px 0.5px 0 rgba(0, 0, 0, 0.3);
    letter-spacing: 1px;
    transform: translate(-2px, -1px);
}

.vital-input {
    width: 70px;
    padding: 0 2px;
    background: transparent;
    border: none;
    border-radius: 0;
    outline: none;
    color: #E0D8C8;
    font-size: 23px;
    font-weight: bolder;
    text-align: right;
    font-family: 'ExcelsiorSans', sans-serif;
    text-shadow: 0.5px 0.5px 0 rgba(0, 0, 0, 0.3);
    letter-spacing: 1px;
    transform: translate(0px, 0px);
    text-transform: uppercase;
}

/* Max HP/SP values - bolder and larger */
#maxHp,
#maxSp {
    font-weight: bolder;
    font-size: 23px;
    font-family: 'ExcelsiorSans', sans-serif;
    color: #8c674a;
    text-shadow: 0.5px 0.5px 0 rgba(0, 0, 0, 0.3);
    letter-spacing: 1px;
    transform: translate(-2px, -1px);
    text-transform: uppercase;
}

/* Vital Bar Container */
.vital-bar-container {
    position: relative;
    width: 100%;
    overflow: visible;
    z-index: 1;
}

/* Vital Bar Background */
.vital-bar {
    width: 100%;
    height: 14px;
    background-color: #4A2C28;
    border-radius: 0;
    overflow: visible; /* Allow shield bar to extend beyond */
    position: relative;
}

/* HP Bar - Uses background image */
.hp-bar {
    position: relative;
    width: 100%;
    height: 14px;
    background-image: url('UI_Card/BattleUI_InfoPopup_HealthBarBg.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;
    background-color: transparent !important;
    min-height: 14px;
    overflow: visible; /* Allow shield bar to extend beyond */
}

/* HP Bar Fill - Uses foreground image */
.hp-bar-fill {
    position: relative;
    height: 100%;
    background-image: url('UI_Card/BattleUI_InfoPopup_HealthBar.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: left center;
    width: 100%;
    transition: width 0.3s ease;
    border-radius: 0;
    z-index: 0;
}

/* HP Bar Shield */
.hp-bar-shield {
    position: absolute;
    top: 0;
    left: 0;
    height: 13.5px;
    background-color: rgba(135, 206, 250, 0.7); /* Fallback color - light blue */
    background-image: url('UI_Card/Shield_Bar.png') !important;
    background-size: 100% 100% !important;
    background-repeat: no-repeat !important;
    background-position: right center !important; 
    width: 0%;
    transition: width 0.3s ease, left 0.3s ease;
    border-radius: 0;
    z-index: 2;
    display: none;
}

/* Tremor - Execution Threshold Markers */
.tremor-threshold-marker {
    position: absolute;
    top: 0;
    height: 14px;
    z-index: 10;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.threshold-line {
    width: 2px;
    height: 100%;
    position: relative;
    background-color: #8A00C4;
    box-shadow: 0 0 6px #AD0AFD, 0 0 12px rgba(173, 10, 253, 0.8), 0 0 18px rgba(173, 10, 253, 0.6);
}

.threshold-label {
    position: absolute;
    top: 100%;
    margin-top: 3px;
    font-size: 18px;
    font-weight: bold;
    font-family: 'ExcelsiorSans', sans-serif;
    line-height: 1;
    white-space: nowrap;
    color: #AD0AFD;
}
/* SP Bar - Uses background image */
.sp-bar {
    background-image: url('UI_Card/BattleUI_InfoPopup_SPBarBg.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;
    background-color: transparent !important;
    min-height: 14px;
}

/* SP Bar Fill - Uses foreground image */
.sp-bar-fill {
    height: 100%;
    background-image: url('UI_Card/BattleUI_InfoPopup_SPBar.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: left center;
    width: 100%;
    transition: width 0.3s ease;
    border-radius: 0;
}

/* Legacy classes for backwards compatibility */
.vital {
    display: inline-flex;
    gap: 6px;
    font-weight: 700;
}

.vital .vital-label {
    color: #e0e0e0;
}

.hp-vital .vital-values {
    color: #ef5350;
}

.sp-vital .vital-values {
    color: #42a5f5;
}

/* Stagger overlay on HP vital */
.hp-vital {
    position: relative;
}

.hp-vital-container {
    position: relative;
}

.stagger-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    pointer-events: none;
}

.stagger-image {
    width: 120px;
    height: 120px;
}

/* hide number spinners for vitals */
.vital-input::-webkit-outer-spin-button,
.vital-input::-webkit-inner-spin-button {
    appearance: none;
    -webkit-appearance: none;
    margin: 0;
}
.vital-input[type="number"] {
    appearance: none;
    -moz-appearance: textfield;
}

/* HP damage input row */
.hp-damage-row {
    display: flex;
    gap: 6px;
    align-items: center;
    margin: 4px 0 10px 0;
    flex-basis: 100%;
}
.hp-damage-row .dmg-label {
    color: #e0e0e0;
    font-weight: 700;
}
.hp-damage-row .dmg-input {
    width: 64px;
    padding: 2px 4px;
    background: transparent;
    border: 1px solid #666;
    border-radius: 3px;
    color: #e0e0e0;
}
.hp-damage-row .dmg-select {
    padding: 2px 4px;
    background: #2a2a2a;
    border: 1px solid #666;
    border-radius: 3px;
    color: #e0e0e0;
}
.hp-damage-row .dmg-btn {
    padding: 2px 8px;
    border: 1px solid #777;
    border-radius: 3px;
    background: #444;
    color: #fff;
    cursor: pointer;
}
.hp-damage-row .dmg-btn:hover {
    background: #555;
}

.hand-section h3 {
    margin-bottom: 15px;
    color: #9c27b0;
}

.hand-limit {
    text-align: left;
    margin-bottom: 10px;
    font-weight: bold;
    color: #ff9800;
}

.singleton-status {
    text-align: left;
    margin-bottom: 10px;
    padding: 8px 12px;
    background: linear-gradient(135deg, #4a148c, #7b1fa2);
    border: 2px solid #e1bee7;
    border-radius: 6px;
    box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
    animation: singletonGlow 2s ease-in-out infinite alternate;
}

.singleton-indicator {
    color: #fff;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    gap: 8px;
}

@keyframes singletonGlow {
    0% {
        box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        border-color: #e1bee7;
    }
    100% {
        box-shadow: 0 0 20px rgba(156, 39, 176, 0.8);
        border-color: #f8bbd9;
    }
}

.hand-display {
    background-color: #2a2a2a;
    border: 2px solid #999;
    border-radius: 2px;
    flex: 1;
	overflow-y: auto;
	overflow-x: auto;
    padding: 8px;
	display: flex;
	flex-wrap: wrap; /* allow wrapping to new rows */
	gap: 0;            /* overlap will be handled with negative margins */
	align-items: flex-end; /* keep cards aligned to bottom edge */
	align-content: flex-start; /* align rows to top */
    margin: 10px 0;
	min-height: 260px; /* make hand area taller */
}

/* Use the same card model as preview for hand cards */
.hand-display .page-card.hand-page-card {
    width: 135px;
    min-height: 170px;
    border-color: #4a9eff;
	margin-left: -56px;           /* overlap successive cards */
	position: relative;
	transform-origin: bottom left;
	transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}
.hand-display .page-card.hand-page-card:first-child {
	margin-left: 0; /* reset margin for first card */
}
/* Reset margin for first card of each row, but add small offset for rows after first */
.hand-display .page-card.hand-page-card:nth-child(6n+1) {
	margin-left: 0; /* reset margin for start of new row */
}
/* Add vertical spacing for cards in rows after the first */
.hand-display .page-card.hand-page-card:nth-child(n+7) {
	margin-top: -20px; /* overlap rows slightly, adjust as needed */
}
/* Smooth transition for first card of second row - add small left offset */
.hand-display .page-card.hand-page-card:nth-child(7) {
	margin-left: 8px; /* small offset to smooth the visual transition */
}
/* subtle fanned angle - pattern resets every 6 cards (per row) */
.hand-display .page-card.hand-page-card:nth-child(6n+1),
.hand-display .page-card.hand-page-card:nth-child(6n+3),
.hand-display .page-card.hand-page-card:nth-child(6n+5) {
	transform: rotate(-1.2deg);
}
.hand-display .page-card.hand-page-card:nth-child(6n+2),
.hand-display .page-card.hand-page-card:nth-child(6n+4),
.hand-display .page-card.hand-page-card:nth-child(6n+6) {
	transform: rotate(1deg);
}
/* raise hovered card above neighbors while preserving its base angle */
.hand-display .page-card.hand-page-card:nth-child(6n+1):hover,
.hand-display .page-card.hand-page-card:nth-child(6n+3):hover,
.hand-display .page-card.hand-page-card:nth-child(6n+5):hover {
	transform: rotate(-1.2deg) translateY(-8px) scale(1.03);
	z-index: 10;
}
.hand-display .page-card.hand-page-card:nth-child(6n+2):hover,
.hand-display .page-card.hand-page-card:nth-child(6n+4):hover,
.hand-display .page-card.hand-page-card:nth-child(6n+6):hover {
	transform: rotate(1deg) translateY(-8px) scale(1.03);
	z-index: 10;
}
/* Card shadow using image */
.hand-display .page-card.hand-page-card::after {
	content: '';
    position: absolute;
    bottom: -10px;
    left: 43%;
    transform: translateX(-49%);
    width: 105%;
    height: 200px;
    background-image: url('Other Stuff/CardDesign/CardShadow_Page.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center bottom;
    pointer-events: none;
    z-index: -1;
    opacity: 0.6;
	transition: opacity 0.2s ease;
}
.hand-display .page-card.hand-page-card:hover::after {
	opacity: 0.8;
}
.hand-display .page-card.hand-page-card .card-title {
    margin: 26px 0 10px 0;
}
.hand-display .page-card.hand-page-card .card-effects .effect-icon {
    width: 22px;
    height: 22px;
}
/* ensure the light usage badge stays visible when overlapped */
.hand-display .page-card.hand-page-card .card-light-usage {
	z-index: 3;
}
.hand-status-badges {
    position: absolute;
    bottom: 6px;
    right: 6px;
    display: flex;
    gap: 6px;
}
.status-badge {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    color: #fff;
    background: rgba(0,0,0,0.35);
    border: 1px solid rgba(255,255,255,0.15);
    text-transform: uppercase;
}
.status-badge.single-use {
    background: rgba(255, 107, 107, 0.25);
    border-color: rgba(255, 107, 107, 0.45);
}
.status-badge.always-available {
    background: rgba(78, 205, 196, 0.25);
    border-color: rgba(78, 205, 196, 0.45);
}

/* Bottom deal styling for the new hand cards */
.page-card.hand-page-card.bottom-deal-card {
    border: 2px solid #4caf50;
    box-shadow: 0 0 12px rgba(76, 175, 80, 0.6), 0 0 24px rgba(76, 175, 80, 0.4);
    background-color: rgba(76, 175, 80, 0.09);
}

/* Status Effects container styled similarly to hand-display */
.status-effects-display {
    background-color: #2a2a2a;
    border: 2px solid #999;
    border-radius: 2px;
    padding: 8px;
    margin: 10px 0;
}

.status-effects-header {
    color: #9c27b0;
    font-weight: 700;
    margin-bottom: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.bullet-display {
    display: flex;
    align-items: center;
    gap: 4px;
    color: #fff;
    font-weight: 600;
}

.bullet-display .status-icon {
    width: 20px;
    height: 20px;
}

.status-effects-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 8px;
}

/* .status-effect-row-break not used in placeholder */

.status-effect-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 6px;
}

/* color variants removed for placeholder */

@font-face {
    font-family: 'ExcelsiorSans';
    src: url('ExcelsiorSans.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Mikodacs';
    src: url('Mikodacs.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

.status-value {
    font-weight: 800;
    font-size: 26px;
    color: currentColor;
    text-shadow: 1px 1px 0 #000;
    font-family: 'ExcelsiorSans', sans-serif;
}

/* Shift status number down to align with larger icon */
.status-effects-list .status-value { transform: translate(-38px, 10px); }

/* .status-value.small removed for placeholder */

.status-icon {
    width: 18px;
    height: 18px;
    background-size: contain;
    background-repeat: no-repeat;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.6));
}

/* Example icon mapping for placeholder */
/* Power Up status icon */
.status-icon.effect-powerup { background-image: url('STATUSICONS/POWERUP.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Attack Power Up status icon */
.status-icon.effect-attackpowerup { background-image: url('STATUSICONS/AttackPowerUp.png'); width: 42px;
    height: 42px;
    transform: translate(14px, -5px); }

/* Bravery status icon */
.status-icon.effect-bravery { background-image: url('STATUSICONS/Bravery.png'); width: 42px;
    height: 42px;
    transform: translate(0px, -1px);}

/* Defense Power Up status icon */
.status-icon.effect-defensepowerup { background-image: url('STATUSICONS/DEFENSEUP.png'); width: 40px;
    height: 40px;
    transform: translate(14px, -5px); }

/* Slash DMG Up status icon */
.status-icon.effect-slashdmgup { background-image: url('STATUSICONS/SLASHDMGUP.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Pierce DMG Up status icon */
.status-icon.effect-piercedmgup { background-image: url('STATUSICONS/PierceDMGUP.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Blunt DMG Up status icon */
.status-icon.effect-bluntdmgup { background-image: url('STATUSICONS/BluntDMGUP.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Debuff status icons */
/* Slash DMG Down status icon */
.status-icon.effect-slashdmgdown { background-image: url('STATUSICONS/SlashDMGDOWN.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Pierce DMG Down status icon */
.status-icon.effect-piercedmgdown { background-image: url('STATUSICONS/PierceDMGDOWN.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Blunt DMG Down status icon */
.status-icon.effect-bluntdmgdown { background-image: url('STATUSICONS/BluntDMGDOWN.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Power Down status icon */
.status-icon.effect-powerdown { background-image: url('STATUSICONS/PowerDown.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Attack Power Down status icon */
.status-icon.effect-attackpowerdown { background-image: url('STATUSICONS/AttackPowerDown.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Defense Power Down status icon */
.status-icon.effect-defensepowerdown { background-image: url('STATUSICONS/DefensePowerDown.png'); width: 42px;
    height: 42px;
    transform: translate(14px, -5px); }
/* Fragile status icon */
.status-icon.effect-fragile { background-image: url('STATUSICONS/Fragile.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Protection status icon */
.status-icon.effect-protection { background-image: url('STATUSICONS/PROTECTION.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Taunt status icon */
.status-icon.effect-taunt { background-image: url('STATUSICONS/TAUNT.png'); width: 46px;
    height: 46px;
    transform: translate(5px, -5px); }
/* Bind status icon */
.status-icon.effect-bind { background-image: url('STATUSICONS/Bind.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Charge status icon */
.status-icon.effect-charge { background-image: url('STATUSICONS/WarpCharge.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }
/* Paralysis status icon */
.status-icon.effect-paralysis { background-image: url('STATUSICONS/Paralysis.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Staggered (SP 0) indicator */
.status-icon.effect-staggered { background-image: url('STATUSICONS/stagger.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Burn status icon */
.status-icon.effect-burn { background-image: url('STATUSICONS/Burn.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Tremor status icon */
.status-icon.effect-tremor { background-image: url('STATUSICONS/Tremor.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Tremor - Execution status icon (uses Tremor icon unless a dedicated asset is provided) */
.status-icon.effect-tremor-execution { background-image: url('STATUSICONS/TremorDecay.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Bleed status icon */
.status-icon.effect-bleed { background-image: url('STATUSICONS/Bleeding.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Rupture status icon */
.status-icon.effect-rupture { background-image: url('STATUSICONS/Rupture.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Sinking status icon */
.status-icon.effect-sinking { background-image: url('STATUSICONS/Sinking.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Warning level status icon */
.status-icon.effect-warning { background-image: url('STATUSICONS/Warning.png'); width: 46px;
    height: 46px;
    transform: translate(10px, -5px); }

/* Faith of the Promised Land page indicator (Fates Sealed) */
.status-icon.effect-fates-sealed { background-image: url('STATUSICONS/Faith_Target.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Ignite Weaponry cooldown icon */
.status-icon.effect-ignite-weaponry { background-image: url('STATUSICONS/IgniteWeaponry.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Modified K Corp Ampule icon */
.status-icon.effect-modified-ampule { background-image: url('STATUSICONS/ModifiedAmpule.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Decay Ampule icon */
.status-icon.effect-decay-ampule { background-image: url('STATUSICONS/DecayAmpule.png'); width: 46px;
    height: 46px;
    transform: translate(14px, -5px); }

/* Augury Infusion active icon */
.status-icon.effect-augury-infusion { background-image: url('STATUSICONS/Nanites.png'); width: 50px;
    height: 46px;
    transform: translate(0px, -5px); }

/* Hana Trigram icons */
.status-icon.effect-trigram-geon { background-image: url('STATUSICONS/Hana/Geon.png'); width: 36px; height: 36px; }
.status-icon.effect-trigram-gon  { background-image: url('STATUSICONS/Hana/Gon.png');  width: 36px; height: 36px; }
.status-icon.effect-trigram-gam  { background-image: url('STATUSICONS/Hana/Gam.png');  width: 36px; height: 36px; }
.status-icon.effect-trigram-gi   { background-image: url('STATUSICONS/Hana/Gi.png');   width: 36px; height: 36px; }

/* Next Scene checkbox styling */
.next-scene-label {
    margin-left: 10px;
    font-size: 12px;
    color: #666;
}

.next-scene-checkbox {
    margin-right: 5px;
}
.dice-roll.crit {
    color: #ff8a00; /* orange for crit */
    font-weight: 700;
    text-shadow: 0 0 6px rgba(255, 138, 0, 0.6);
}

/* Haste status icon */
.status-icon.effect-haste { background-image: url('STATUSICONS/Haste.png'); width: 42px;
    height: 42px;
    transform: translate(9px, -4px); }

/* Poise status icon */
.status-icon.effect-poise { background-image: url('STATUSICONS/Poise.png'); width: 46px;
    height: 46px;
    transform: translate(10px, -5px); }

/* Jackpot status icon */
.status-icon.effect-jackpot { background-image: url('STATUSICONS/Luckhold.png'); width: 46px;
    height: 46px;
    transform: translate(10px, -5px); }

/* Smell of Fear status icon */
.status-icon.effect-smelloffear { background-image: url('STATUSICONS/SmellOfFear.png'); width: 46px;
    height: 46px;
    transform: translateY(-5px); }

/* Zwei Defensive Stance active icon */
.status-icon.effect-zwei-defensive { background-image: url('STATUSICONS/ZWEIDEFENSE.png'); width: 36px; height: 36px; }

/* Declared Duel status icon */
.status-icon.effect-declaredduel { background-image: url('STATUSICONS/DeclaredDuel.png'); width: 36px; height: 36px; }
/* Focused Attack status icon */
.status-icon.effect-focusedattack { background-image: url('STATUSICONS/FocusedAttack.png'); width: 36px; height: 36px; }
.status-icon.effect-ammo { background-image: url('STATUSICONS/Ammo.png'); width: 46px;
    height: 46px;
    transform: translate(17px, -3px); }
/* Thumb Ammunition indicators */
/* Shock: Paralysis bg + Ammo front */
.status-icon.thumb-ammo-shock-bg { background-image: url('STATUSICONS/Paralysis.png'); 
    width: 25px;
    height: 43px;
    transform: translate(30px, -3px) rotate(35deg); }
.status-icon.thumb-ammo-shock-fg { background-image: url('STATUSICONS/Ammo.png');      
    width: 42px; 
    height: 42px; 
    transform: translate(-30px, -3px); }
/* Frost: Ice bg + BlueAmmo front */
.status-icon.thumb-ammo-frost-bg { background-image: url('STATUSICONS/FrostAmmo/Ice.png');     
    width: 42px;
    height: 42px;
    transform: translate(4px, 0px) scale(1.5);   }
.status-icon.thumb-ammo-frost-fg { background-image: url('STATUSICONS/FrostAmmo/BlueAmmo.png');   
    width: 29px;
    height: 42px;
    transform: translate(-38px, 11px) scale(1.4); }
/* Armor-Piercing: AimBG bg + PulverisationRound front */
.status-icon.thumb-ammo-ap-bg    { background-image: url('STATUSICONS/ArmorPiercingAmmo/AimBg.png');     
    width: 42px;
    height: 42px;
    transform: translate(17px, -3px) scale(1.3); }
.status-icon.thumb-ammo-ap-fg    { background-image: url('STATUSICONS/ArmorPiercingAmmo/PulverisationRound.png'); 
    width: 42px;
    height: 42px;
    transform: translate(-29px, -3px); }
/* Incendiary: single icon */
.status-icon.thumb-ammo-incendiary { background-image: url('STATUSICONS/IncendiaryAmmo.png'); width: 42px; height: 42px; transform: translate(6px, -3px); }
/* Panic Level status icons */
.status-icon.effect-nervous { background-image: url('STATUSICONS/PanicLvl/Nervous.png'); width: 35px; height: 46px; }
.status-icon.effect-intimidated { background-image: url('STATUSICONS/PanicLvl/Intimidated.png'); width: 46px; height: 46px; }
.status-icon.effect-terrified { background-image: url('STATUSICONS/PanicLvl/Terrified.png'); width: 46px; height: 46px; }
.status-icon.effect-hopeless { background-image: url('STATUSICONS/PanicLvl/Hopeless.png'); width: 46px; height: 46px; }
.status-icon.effect-overwhelmed { background-image: url('STATUSICONS/PanicLvl/Overwhelmed.png'); width: 46px; height: 46px; }
/* Calm Level status icons */
.status-icon.effect-calm { background-image: url('STATUSICONS/PanicLvl/Calm.png'); width: 46px; height: 46px; }
.status-icon.effect-relaxed { background-image: url('STATUSICONS/PanicLvl/Calm.png'); width: 46px; height: 46px; }
.status-icon.effect-resolved { background-image: url('STATUSICONS/PanicLvl/Calm.png'); width: 46px; height: 46px; }
.status-icon.effect-optimistic { background-image: url('STATUSICONS/PanicLvl/Calm.png'); width: 46px; height: 46px; }
.status-icon.effect-persevere { background-image: url('STATUSICONS/PanicLvl/Calm.png'); width: 46px; height: 46px; }
/* pill styles removed for placeholder */

.hand-card {
    background-color: #3a3a3a;
    border: 1px solid #666;
    border-radius: 4px;
    padding: 6px 8px;
    font-size: 12px;
    color: #fff;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 80px;
    text-align: center;
    word-wrap: break-word;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
}

.hand-card:hover {
    background-color: #4a4a4a;
    border-color: #888;
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Highlight for the hand card that a hovered dice was placed on */
.hand-card.assigned-highlight {
    border-color: #ffeb3b;
    box-shadow: 0 0 12px rgba(255, 235, 59, 0.6), 0 0 24px rgba(255, 235, 59, 0.4);
    background-color: rgba(255, 235, 59, 0.08);
}

/* Bottom Deal: Green glow for final card that uses 0 light */
.hand-card.bottom-deal-card {
    border: 2px solid #4caf50;
    box-shadow: 0 0 12px rgba(76, 175, 80, 0.6), 0 0 24px rgba(76, 175, 80, 0.4);
    background-color: rgba(76, 175, 80, 0.1);
    animation: bottom-deal-glow 2s ease-in-out infinite alternate;
}

@keyframes bottom-deal-glow {
    from {
        box-shadow: 0 0 12px rgba(76, 175, 80, 0.6), 0 0 24px rgba(76, 175, 80, 0.4);
    }
    to {
        box-shadow: 0 0 16px rgba(76, 175, 80, 0.8), 0 0 32px rgba(76, 175, 80, 0.6);
    }
}

.bottom-deal-indicator {
    color: #4caf50 !important;
    font-size: 0.8em !important;
    font-weight: 600;
    text-shadow: 0 0 4px rgba(76, 175, 80, 0.8);
}

.single-use-indicator {
    color: #ff6b6b !important;
    font-size: 0.8em !important;
    font-style: italic !important;
    font-weight: 600;
}

.hand-item {
    padding: 6px 8px;
    border-bottom: 1px solid #444;
    cursor: pointer;
}

.hand-item:hover {
    background-color: #444;
}

.hand-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.action-buttons-row {
    display: flex;
    flex-direction: row;
    gap: 10px;
    margin-top: 15px;
}

/* Utility buttons styling to match the first image */
.util-btn {
    flex: 1;
    padding: 12px 8px;
    background-color: #87ceeb; /* Light blue background */
    border: none;
    border-radius: 6px;
    color: #ffffff; /* White text */
    cursor: pointer;
    font-weight: bold;
    font-size: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60px;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.util-btn:hover {
    background-color: #7bb3d9;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.util-btn:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.btn-line-1, .btn-line-2 {
    display: block;
    line-height: 1.2;
}

.btn-line-1 {
    margin-bottom: 2px;
}

.swap-btn {
    width: 100%;
    height: 140px;
    padding: 8px;
    background-color: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    overflow: hidden;
    position: relative;
}

.swap-btn:hover {
    transform: scale(1.05);
}

.swap-btn:hover .swap-icon {
    content: url("BattleIcon_EgoNotExist.png");
}

/* Special mode state marker (no additional styles needed) */

.swap-btn.special-mode .normal-icon {
    display: none;
}

.swap-btn.special-mode .special-icon {
    display: block !important;
    filter: drop-shadow(0 0 4px rgba(255, 0, 0, 0.8));
}

.swap-btn.special-mode:hover .normal-icon {
    display: block !important;
}

.swap-btn.special-mode:hover .special-icon {
    display: none !important;
}

.swap-icon {
    width: 156px;
    height: 156px;
    filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.6));
    object-fit: contain;
    transform: translate(-23px, 20px);
}

.combat-phase-btn, .end-encounter-btn {
    flex: 1;
    padding: 10px;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
    font-weight: bold;
}

.combat-phase-btn {
    background-color: #ff9800;
}

.combat-phase-btn:hover {
    background-color: #f57c00;
}

.end-encounter-btn {
    background-color: #666;
}

.end-encounter-btn:hover {
    background-color: #777;
}


/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: #2a2a2a;
}

::-webkit-scrollbar-thumb {
    background: #666;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #777;
}

/* Responsive Design */
@media (max-width: 1200px) {
    .game-container {
        flex-direction: column;
        height: auto;
    }
    
    .left-panel, .right-panel {
        width: 100%;
    }
    
    .hexagonal-slots {
        flex-wrap: wrap;
    }
}

@media (max-width: 768px) {
    .stats-group {
        flex-direction: column;
    }
    
    .action-buttons {
        flex-direction: column;
    }
}

/* Page Popup Styles */
.page-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.page-popup.show {
    display: flex;
}

.page-popup-content {
    background-color: #3a3a3a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 25px;
    max-width: 700px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
}

.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #555;
}

.popup-header h3 {
    color: #4fc3f7;
    margin: 0;
}

.close-popup {
    color: #aaa;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    line-height: 1;
    transition: color 0.2s ease;
}

.close-popup:hover {
    color: #fff;
}

.page-stats {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background-color: #2a2a2a;
    border-radius: 6px;
    border: 1px solid #444;
}

.stat-label {
    font-weight: bold;
    color: #ccc;
    min-width: 120px;
}

.stat-value {
    color: #fff;
    text-align: right;
    flex: 1;
    margin-left: 15px;
    white-space: pre-line;
}

/* Make list items clickable */
.list-item {
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.list-item:hover {
    background-color: #4a4a4a;
}

/* Character Modal Styles */
.character-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

/* Add Page Modal Styles - Matching Dice Placement Modal */
.add-page-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1001;
}

.add-page-modal.show {
    display: flex;
}

.add-page-modal-content {
    background-color: #3a3a3a;
    padding: 25px;
    border: 2px solid #4fc3f7;
    border-radius: 12px;
    width: 90%;
    max-width: 800px;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
    margin: 0 auto;
}

/* Passive Modal - Matching Combat Pages Section Style */
.passive-modal-content {
    background-color: #3a3a3a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 20px;
    width: 90%;
    max-width: 500px;
    position: relative;
}

.passive-modal-content h3.red-text {
    color: #f44336;
    margin-bottom: 15px;
    margin-top: 0;
}

.passive-modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 15px;
}

.add-page-modal-body {
    margin-bottom: 25px;
}

.search-section {
    margin-bottom: 20px;
}

.search-section h4 {
    color: #4fc3f7;
    margin-bottom: 10px;
    font-size: 16px;
}

.search-section .search-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #555;
    border-radius: 8px;
    background: linear-gradient(135deg, #2a2a2a 0%, #333 100%);
    color: #fff;
    font-size: 16px;
    transition: all 0.3s ease;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.search-section .search-input:focus {
    outline: none;
    border-color: #4fc3f7;
    box-shadow: 0 0 15px rgba(79, 195, 247, 0.4), inset 0 2px 4px rgba(0, 0, 0, 0.3);
    transform: translateY(-1px);
}

.search-section .search-input::placeholder {
    color: #888;
}

.page-selection h4 {
    color: #4fc3f7;
    margin-bottom: 15px;
    font-size: 16px;
}

.page-list {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #555;
    border-radius: 8px;
    background-color: #2a2a2a;
}

.page-item {
    padding: 15px;
    border-bottom: 1px solid #444;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.page-item:last-child {
    border-bottom: none;
}

.page-item:hover {
    background-color: #333;
    border-color: #4fc3f7;
}

.page-item.selected {
    background-color: #1a3a4a;
    border-color: #4fc3f7;
    box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
}

.page-item.selected::after {
    content: '';
    position: absolute;
    top: 15px;
    right: 15px;
    color: #4fc3f7;
    font-weight: bold;
    font-size: 18px;
}

/* Status Effect Debug Modal Styles */
.status-effect-selection {
    margin-bottom: 20px;
}

.status-effect-selection h4 {
    color: #4fc3f7;
    margin-bottom: 15px;
    font-size: 16px;
}

.status-effect-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    max-height: 400px;
    overflow-y: auto;
    padding: 10px;
    border: 1px solid #555;
    border-radius: 8px;
    background-color: #2a2a2a;
}

.status-effect-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 15px;
    background: linear-gradient(135deg, #333 0%, #2a2a2a 100%);
    border: 1px solid #555;
    border-radius: 6px;
    transition: all 0.3s ease;
}

.status-effect-item:hover {
    background: linear-gradient(135deg, #444 0%, #333 100%);
    border-color: #4fc3f7;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(79, 195, 247, 0.2);
}

.status-effect-item label {
    color: #fff;
    font-weight: 500;
    font-size: 14px;
    margin-right: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

.status-input {
    width: 60px;
    padding: 6px 8px;
    border: 1px solid #555;
    border-radius: 4px;
    background: linear-gradient(135deg, #2a2a2a 0%, #333 100%);
    color: #fff;
    font-size: 14px;
    text-align: center;
    transition: all 0.3s ease;
}

.status-input:focus {
    outline: none;
    border-color: #4fc3f7;
    box-shadow: 0 0 8px rgba(79, 195, 247, 0.4);
}

.status-checkbox {
    width: 18px;
    height: 18px;
    accent-color: #4fc3f7;
    cursor: pointer;
}

.poise-inputs {
    display: flex;
    gap: 12px;
    align-items: center;
}

.poise-input-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.poise-label {
    color: #ccc;
    font-size: 12px;
    font-weight: 500;
    margin: 0;
    cursor: default;
}

.poise-inputs .status-input {   
    width: 50px;
}

/* Status effect items in page-list format */
#statusEffectList {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

#statusEffectList .status-effect-item {
    margin-bottom: 0;
    border-bottom: none;
    border: 1px solid #444;
    border-radius: 6px;
}

.status-effect-item .status-input-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.status-effect-item .page-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    margin-bottom: 0;
}

.status-effect-item .page-name {
    display: flex;
    align-items: center;
    flex: 1;
}

.status-effect-item .status-checkbox {
    margin-right: 8px;
}

/* Status effect icons in modal list */
#statusEffectList .status-icon,
#debuffEffectList .status-icon {
    width: 33px;
    height: 21px;
    display: inline-block;
    vertical-align: middle;
    flex-shrink: 0;
    transform: translate(12px, 1px);
}

/* Debuff effect list grid layout */
#debuffEffectList {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

#debuffEffectList .status-effect-item {
    margin-bottom: 0;
    border-bottom: none;
    border: 1px solid #444;
    border-radius: 6px;
}

/* Panic level list grid layout */
#panicLevelList {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

#panicLevelList .status-effect-item {
    margin-bottom: 0;
    border-bottom: none;
    border: 1px solid #444;
    border-radius: 6px;
}

#panicLevelList .status-icon,
#calmLevelList .status-icon {
    width: 33px;
    height: 21px;
    display: inline-block;
    vertical-align: middle;
    flex-shrink: 0;
    transform: translate(12px, 1px);
}

/* Calm level list grid layout */
#calmLevelList {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

#calmLevelList .status-effect-item {
    margin-bottom: 0;
    border-bottom: none;
    border: 1px solid #444;
    border-radius: 6px;
}

.confirm-add-status-btn {
    background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
    color: #fff;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(79, 195, 247, 0.3);
}

.confirm-add-status-btn:hover {
    background: linear-gradient(135deg, #29b6f6 0%, #0288d1 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(79, 195, 247, 0.4);
}

.cancel-add-status-btn {
    background: linear-gradient(135deg, #666 0%, #555 100%);
    color: #fff;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-left: 10px;
}

.cancel-add-status-btn:hover {
    background: linear-gradient(135deg, #777 0%, #666 100%);
    transform: translateY(-2px);
}

/* Remove button styling for owned pages */
.remove-owned-page-btn {
    position: static;
    margin-top: 8px;
    padding: 6px 12px;
    background-color: #f44336;
    color: #fff;
    border: none;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Courier New', monospace;
    width: 100%;
    display: block;
}

.remove-owned-page-btn:hover {
    background-color: #d32f2f;
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(244, 67, 54, 0.4);
}

.remove-owned-page-btn:active {
    transform: translateY(0);
    background-color: #b71c1c;
}

.page-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.page-name {
    color: #fff;
    font-weight: bold;
    font-size: 16px;
}

.page-dice-count {
    color: #4fc3f7;
    font-size: 14px;
    font-weight: bold;
    background-color: rgba(79, 195, 247, 0.2);
    padding: 4px 8px;
    border-radius: 4px;
}

.page-item-details {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.page-category,
.page-range,
.page-keywords {
    color: #ccc;
    font-size: 12px;
}

.page-category {
    color: #ff9800;
    font-weight: bold;
}

.confirm-add-page-btn {
    padding: 12px 24px;
    background-color: #4fc3f7;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.confirm-add-page-btn:hover {
    background-color: #29b6f6;
}

.confirm-add-page-btn:disabled {
    background-color: #666;
    cursor: not-allowed;
}

.cancel-add-page-btn {
    padding: 12px 24px;
    background-color: #666;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.cancel-add-page-btn:hover {
    background-color: #555;
}

.modal-content {
    background-color: #3a3a3a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
}

.modal-content h3 {
    color: #4fc3f7;
    margin-bottom: 20px;
    text-align: center;
}

.character-list {
    margin-bottom: 20px;
}

.character-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border: 1px solid #555;
    border-radius: 4px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.character-item:hover {
    background-color: #555;
}

.char-name {
    font-weight: bold;
    color: #4fc3f7;
}

.char-stats {
    color: #ff9800;
    font-size: 14px;
}

.char-date {
    color: #ccc;
    font-size: 12px;
}

.modal-buttons {
    display: flex;
    justify-content: center;
}

.modal-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

.cancel-btn {
    background-color: #666;
    color: white;
}

.cancel-btn:hover {
    background-color: #777;
}

/* Notification Styles */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    border-radius: 4px;
    color: white;
    font-weight: bold;
    z-index: 1001;
    animation: slideIn 0.3s ease-out;
    max-width: 300px;
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    line-height: 1.4;
    font-size: 14px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 8px;
}

.notification.success {
    background-color: #4caf50;
}

.notification.error {
    background-color: #f44336;
}

.notification.info {
    background-color: #2196f3;
}

.notification.warning {
    background-color: #ff9800;
}

.notification-icon {
    width: 18px;
    height: 18px;
    display: inline-block;
    object-fit: contain;
}
.notification-text { display: inline-block; }

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Popup Actions */
.popup-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #555;
}

.add-page-btn {
    padding: 10px 18px;
    background: #4caf50;
    border: 1px solid #2e7d32;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    font-weight: bold;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
    transition: background 0.15s ease, transform 0.05s ease, box-shadow 0.15s ease;
}

.add-page-btn:hover {
    background: linear-gradient(180deg, #66bb6a 0%, #2e7d32 100%);
}

.add-page-btn:active {
    transform: translateY(1px);
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);
}

.add-page-btn:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.35);
}

.add-page-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Dice Placement Popup Styles - Container removed to avoid conflicts */

/* Removed conflicting dice placement popup styles */

.current-dice {
    background-color: #2a2a2a;
    border: 1px solid #444;
    border-radius: 6px;
    padding: 15px;
    text-align: center;
    font-weight: bold;
    color: #4fc3f7;
    font-size: 16px;
}

.page-dice-mapping {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.page-dice-item {
    background-color: #2a2a2a;
    border: 1px solid #444;
    border-radius: 6px;
    padding: 15px;
    transition: border-color 0.2s ease;
}

.page-dice-item:hover {
    border-color: #666;
}

.page-name {
    font-weight: bold;
    color: #fff;
    margin-bottom: 8px;
    font-size: 14px;
}

.single-use-badge {
    background-color: #ff6b6b;
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    margin-left: 8px;
    font-weight: normal;
}

.dice-requirements {
    font-size: 13px;
    padding: 8px 12px;
    border-radius: 4px;
    margin-top: 5px;
}

.dice-requirements.available {
    background-color: rgba(76, 175, 80, 0.2);
    border: 1px solid #4caf50;
    color: #4caf50;
}

.dice-requirements.unavailable {
    background-color: rgba(244, 67, 54, 0.2);
    border: 1px solid #f44336;
    color: #f44336;
}

.dice-requirements:not(.available):not(.unavailable) {
    background-color: rgba(158, 158, 158, 0.2);
    border: 1px solid #9e9e9e;
    color: #9e9e9e;
}

/* Make hand limit clickable */
.hand-limit {
    text-align: left;
    margin-bottom: 10px;
    font-weight: bold;
    color: #ff9800;
}

/* New Dice Placement Popup Styles */
.dice-placement-popup {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: center;
}

.dice-placement-popup.show {
    display: flex;
}

.dice-popup-content {
    background-color: #3a3a3a;
    padding: 25px;
    border: 2px solid #4fc3f7;
    border-radius: 12px;
    width: 90%;
    max-width: 700px;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
    margin: 0 auto;
}

.dice-popup-body {
    margin-bottom: 25px;
}

.page-info {
    background-color: #2a2a2a;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    border-left: 4px solid #4fc3f7;
}

.page-info h4 {
    color: #4fc3f7;
    margin-bottom: 10px;
    font-size: 18px;
}

.page-info p {
    color: #ccc;
    line-height: 1.4;
}

.dice-selection {
    margin-bottom: 20px;
}

.dice-selection h4 {
    color: #4fc3f7;
    margin-bottom: 15px;
    font-size: 16px;
}

.dice-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.dice-option {
    background-color: transparent;
    border: none;
    border-radius: 0;
    padding: 5px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.dice-option:hover {
    transform: none;
}

.dice-option.selected {
    border: none;
    background-color: transparent;
    box-shadow: none;
}

.dice-option.selected::after {
    content: none;
}

.dice-option.occupied {
    cursor: not-allowed;
    opacity: 0.6;
}

.dice-option.occupied:hover {
    transform: none;
}

/* Dice images in placement popup (separate from speed-range-img) */
.dice-option-img {
    width: 72px;
    height: 72px;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* Individual DiceRoll image sizes for placement popup (can edit each face separately) */
.dice-option-img[src*="DiceRoll1.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll2.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll3.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll4.png"] {
    width: 92px;
    height: 128px;
    transform: none;
}

.dice-option-img[src*="DiceRoll5.png"] {
    width: 90px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll6.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll7.png"] {
    width: 95px;
    height: 134px;
    transform: none;
}

.dice-option-img[src*="DiceRoll8.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

.dice-option-img[src*="DiceRoll9.png"] {
    width: 95px;
    height: 130px;
    transform: none;
}

/* Light-up effect when hovering/selected */
.dice-option:hover .dice-option-img {
    /* Subtle yellow glow and slight scale on hover */
    filter: brightness(1.1) saturate(1.1) drop-shadow(0 0 6px yellow);
    transform: scale(1.04);
}

.dice-option.selected .dice-option-img {
    /* Emphasize border glow without over-brightening the center */
    filter: brightness(1.1) saturate(1.2) drop-shadow(0 0 8px yellow);
}

.dice-option.occupied .dice-option-img {
    filter: grayscale(0.7) opacity(0.5);
}

.dice-overlay-label {
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    color: #fff;
    text-transform: uppercase;
    text-shadow: 0 0 3px rgba(0, 0, 0, 0.9);
}

.occupied-label {
    font-size: 10px;
    color: #ff6b6b;
    text-transform: uppercase;
    margin-top: 5px;
    font-weight: bold;
}

.dice-value {
    font-size: 24px;
    font-weight: bold;
    color: #4fc3f7;
    margin-bottom: 5px;
}

.dice-label {
    font-size: 12px;
    color: #ccc;
    text-transform: uppercase;
}

.placement-preview {
    background-color: #2a2a2a;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #ff9800;
}

.placement-preview h4 {
    color: #ff9800;
    margin-bottom: 15px;
    font-size: 16px;
}

.placement-preview-content {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
}

.preview-dice {
    background-color: #333;
    border: 2px solid #ff9800;
    border-radius: 6px;
    padding: 8px 12px;
    color: #ff9800;
    font-weight: bold;
    font-size: 14px;
}

.preview-page {
    background-color: #333;
    border: 2px solid #4fc3f7;
    border-radius: 6px;
    padding: 8px 12px;
    color: #4fc3f7;
    font-weight: bold;
    font-size: 14px;
}

.confirm-placement-btn {
    padding: 12px 24px;
    background-color: #4fc3f7;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.confirm-placement-btn:hover {
    background-color: #29b6f6;
}

.confirm-placement-btn:disabled {
    background-color: #666;
    cursor: not-allowed;
}

.cancel-placement-btn {
    padding: 12px 24px;
    background-color: #666;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.cancel-placement-btn:hover {
    background-color: #555;
}

/* Dice Placed Indicator */
.dice-placed-indicator {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: #4caf50;
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    z-index: 10;
}

/* Hex slot positioning for placed indicator */
.hex-slot.filled {
    position: relative;
    transition: all 0.3s ease;
}

/* Hover effect for dice - white glow */
.hex-slot.filled:hover {
    box-shadow: 0 0 25px #ffffff, 0 0 50px #ffffff, 0 0 75px #ffffff !important;
    filter: brightness(1.4) saturate(1.3) !important;
    transform: scale(1.08) !important;
    z-index: 15;
}
/* Tooltip shown next to hovered dice with page name */
/* Removed: old per-slot tooltip styles were deprecated in favor of #diceTooltip */
/* Dice Glow Animation for occupied dice */
@keyframes diceGlow {
    0% {
        box-shadow: 0 0 20px #ffeb3b, 0 0 40px #ffeb3b, 0 0 60px #ffeb3b;
        filter: brightness(1.3) saturate(1.2);
    }
    100% {
        box-shadow: 0 0 25px #ffeb3b, 0 0 50px #ffeb3b, 0 0 75px #ffeb3b;
        filter: brightness(1.5) saturate(1.4);
    }
}

/* Save Buttons Section */
.save-buttons-section {
    display: flex;
    gap: 12px;
    margin-top: 20px;
    padding: 15px;
    background-color: #2a2a2a;
    border: 1px solid #555;
    border-radius: 8px;
    justify-content: center;
}

.save-deck-btn, .view-saved-decks-btn {
    flex: 1;
    padding: 12px 16px;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    min-height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Courier New', monospace;
}

.save-deck-btn {
    background-color: #2196f3;
    box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
}

.save-deck-btn:hover {
    background-color: #1976d2;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(33, 150, 243, 0.4);
}

.view-saved-decks-btn {
    background-color: #ff9800;
    box-shadow: 0 2px 4px rgba(255, 152, 0, 0.3);
}

.view-saved-decks-btn:hover {
    background-color: #f57c00;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(255, 152, 0, 0.4);
}

.save-deck-btn:active, .view-saved-decks-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Saved Decks Popup */
.saved-decks-popup {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

.saved-decks-popup.show {
    display: block;
}

.saved-decks-popup-content {
    background-color: #2a2a2a;
    margin: 3% auto;
    padding: 0;
    border: 2px solid #4a9eff;
    border-radius: 8px;
    width: 90%;
    max-width: 800px;
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.9);
    font-family: 'Courier New', monospace;
}

.saved-section {
    margin-bottom: 30px;
}

.saved-section:last-child {
    margin-bottom: 0;
}

.saved-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.saved-item {
    background-color: #3a3a3a;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 15px;
    transition: all 0.3s ease;
}

.saved-item:hover {
    border-color: #4a9eff;
    background-color: #404040;
}

.saved-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.saved-name {
    color: #4a9eff;
    font-weight: bold;
    font-size: 16px;
}

.saved-count {
    background-color: rgba(74, 158, 255, 0.2);
    color: #4a9eff;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
}

.saved-item-details {
    display: flex;
    gap: 15px;
    margin-bottom: 12px;
    font-size: 12px;
    color: #ccc;
}

.saved-character {
    color: #ff9800;
}

.saved-date {
    color: #90ee90;
}

.saved-item-actions {
    display: flex;
    gap: 8px;
}

.load-saved-btn, .delete-saved-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: bold;
    transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
}

.load-saved-btn {
    background-color: #4caf50;
    color: white;
}

.load-saved-btn:hover {
    background-color: #45a049;
}

.delete-saved-btn {
    background-color: #f44336;
    color: white;
}

.delete-saved-btn:hover {
    background-color: #d32f2f;
}

/* Custom Modal Styles - Matching Owned Pages Design */
.custom-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

.custom-modal.show {
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-modal-content {
    background-color: #2a2a2a;
    border: 2px solid #4a9eff;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.9);
    position: relative;
    overflow: hidden;
    min-width: 400px;
    max-width: 500px;
    width: 90%;
    font-family: 'Courier New', monospace;
}

.custom-modal-header {
    background-color: #1a1a1a;
    padding: 15px 20px;
    border-bottom: 2px solid #4a9eff;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.custom-modal-header h3 {
    color: #4a9eff;
    margin: 0;
    font-size: 1.4em;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    text-shadow: 0 0 5px rgba(74, 158, 255, 0.3);
}

.custom-modal-close {
    color: #fff;
    font-size: 1.5em;
    cursor: pointer;
    background: none;
    border: none;
    padding: 5px;
    border-radius: 3px;
    transition: background-color 0.2s;
}

.custom-modal-close:hover {
    background-color: #444;
}

.custom-modal-body {
    padding: 20px;
    color: #fff;
}

.custom-modal-body p {
    margin: 0 0 15px 0;
    font-size: 16px;
    line-height: 1.4;
    color: #ccc;
}

.custom-modal-input {
    width: 100%;
    padding: 10px;
    background-color: #1a1a1a;
    border: 1px solid #555;
    border-radius: 4px;
    color: #fff;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    transition: border-color 0.3s ease;
}

.custom-modal-input:focus {
    outline: none;
    border-color: #4a9eff;
    box-shadow: 0 0 5px rgba(74, 158, 255, 0.3);
}

.custom-modal-input::placeholder {
    color: #888;
}

.custom-modal-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.1);
}

.custom-modal-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: all 0.3s ease;
    min-width: 100px;
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.custom-modal-btn.confirm-btn {
    background-color: #4a9eff;
    color: #fff;
    box-shadow: 0 2px 4px rgba(74, 158, 255, 0.3);
}

.custom-modal-btn.confirm-btn:hover {
    background-color: #3a8eef;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(74, 158, 255, 0.4);
}

.custom-modal-btn.cancel-btn {
    background-color: #666;
    color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.custom-modal-btn.cancel-btn:hover {
    background-color: #777;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

/* Speed Settings Section */
.speed-settings-section {
    margin: 15px 0;
}

.speed-settings-btn {
    width: 100%;
    padding: 10px;
    background-color: #2a2a2a;
    border: 1px solid #555;
    border-radius: 4px;
    color: #fff;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
}

.speed-settings-btn:hover {
    background-color: #3a3a3a;
    border-color: #4a9eff;
}

/* Inline SPEED dropdown panel */
.speed-dropdown {
    display: none;
    margin-top: 6px;
    padding: 10px 14px;
    background-color: #202020;
    border: 1px solid #555;
    border-radius: 0 0 4px 4px;
}

.speed-settings-section.open .speed-dropdown {
    display: block;
}

.speed-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
}

.speed-row:last-child {
    margin-bottom: 0;
}

.speed-label {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    letter-spacing: 1px;
    color: #c9c9c9;
}

.speed-value {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    color: #ffffff;
}

/* When dropdown is open, visually connect button and panel */
.speed-settings-section.open .speed-settings-btn {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

/* Speed Settings Modal */
.speed-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
}

.speed-modal.show {
    display: flex;
    align-items: center;
    justify-content: center;
}

.speed-modal-content {
    background-color: #2a2a2a;
    border-radius: 4px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.9);
    position: relative;
    overflow: hidden;
    min-width: 300px;
    max-width: 400px;
    width: 90%;
    font-family: 'Courier New', monospace;
}

.speed-modal-header {
    background-color: #1a1a1a;
    padding: 12px 15px;
    border-bottom: 1px solid #444;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.speed-modal-header h3 {
    color: #fff;
    margin: 0;
    font-size: 1.2em;
    font-weight: bold;
    font-family: 'Courier New', monospace;
}

.speed-modal-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

.speed-modal-minimize,
.speed-modal-close {
    color: #fff;
    font-size: 1.2em;
    cursor: pointer;
    background: none;
    border: none;
    padding: 2px 5px;
    border-radius: 3px;
    transition: background-color 0.2s;
    line-height: 1;
}

.speed-modal-minimize:hover,
.speed-modal-close:hover {
    background-color: #444;
}

.speed-modal-body {
    padding: 20px;
    background-color: #1e1e1e;
    color: #fff;
}

.speed-input-group {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.speed-input-group:last-child {
    margin-bottom: 0;
}

.speed-input-group label {
    color: #fff;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    margin-right: 10px;
}

.speed-input {
    width: 80px;
    padding: 8px;
    background-color: #2a2a2a;
    border: 1px solid #555;
    border-radius: 4px;
    color: #fff;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    text-align: center;
    transition: border-color 0.3s ease;
}

.speed-input:focus {
    outline: none;
    border-color: #4a9eff;
    box-shadow: 0 0 5px rgba(74, 158, 255, 0.3);
}
